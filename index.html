<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#051024">
    <title>Digiters</title>

    <!-- CSS -->
    <link rel="stylesheet" href="CSS/style.css">

    <!-- BabylonJS -->
    <script src="https://cdn.babylonjs.com/babylon.js?v=6.40"></script>
    <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
    <script src="https://cdn.babylonjs.com/serializers/babylonjs.serializers.min.js"></script>

</head>
<body>
<!-- Overlay d'erreur JS -->
<div id="globalErrorOverlay" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:99999;background:rgba(0,0,0,0.85);color:#fff;font-family:sans-serif;font-size:2em;justify-content:center;align-items:center;text-align:center;">
    <div>
        <div style="font-size:3em;">âŒ</div>
        <div id="globalErrorMessage">Une erreur critique est survenue.</div>
        <div style="font-size:0.5em;margin-top:1em;">Ouvre la console (F12) pour plus de dÃ©tails.</div>
    </div>
</div>
<!-- Ã‰cran d'accueil -->
<div id="welcomeScreen">
    <div class="welcome-container">
        <h1 class="welcome-title">ğŸ® DIGITERS ğŸ®</h1>
        <p class="welcome-subtitle">Un jeu d'aventure en 3D</p>
        
        <div class="welcome-content">
            <div class="welcome-section">
                <h2>ğŸ“Š Ã€ propos du projet</h2>
                <p><strong>Temps de dÃ©veloppement :</strong> ~117 heures</p>
                <p><strong>Temps de Modelisation 3d :</strong> ~104 heures</p>
                <p><strong>PÃ©riode :</strong> Janvier 2026</p>
                <p><strong>Version :</strong> v1.2.5</p>
            </div>
            
            <div class="welcome-section">
                <h2>âš™ï¸ Technologies utilisÃ©es</h2>
                <ul class="tech-list">
                    <li><strong>BabylonJS 4.x</strong> - Moteur 3D</li>
                    <li><strong>JavaScript ES6+</strong> - Logique du jeu</li>
                    <li><strong>HTML5/CSS3</strong> - Interface utilisateur</li>
                    <li><strong>Blender</strong> - ModÃ©lisation 3D</li>
                    <li><strong>Aseprite</strong> - CrÃ©ation d'icÃ´nes</li>
                </ul>
            </div>
            
            <div class="welcome-section">
                <h2>ğŸ¯ FonctionnalitÃ©s</h2>
                <ul class="features-list">
                    <li>Exploration d'un monde 3D interactif</li>
                    <li>SystÃ¨me de combat au tour par tour</li>
                    <li>Gestion d'Ã©quipe et inventaire</li>
                    <li>Dialogues avec PNJ</li>
                    <li>Sauvegarde automatique</li>
                    <li>Support mobile avec contrÃ´les tactiles</li>
                </ul>
            </div>
        </div>
        
        <button id="playButton" class="play-button">â–¶ JOUER</button>
    </div>
</div>

<canvas id="renderCanvas"></canvas>

<!-- Affichage nom de zone -->
<div id="zoneName"></div>

<div id="instructions">
    <strong>ğŸ® ContrÃ´les:</strong><br>
    ZQSD : DÃ©placer<br>
    Shift : Courir<br>
    E : Interagir / Parler / Combat<br>
    M : Menu<br><br>
    <strong>Manette:</strong><br>
    A : Courir / Valider | B : Interagir | Y : Menu
</div>

<!-- Overlay floutÃ© (menus / dialogues, pas combat) -->
<div id="menuOverlay"></div>

<!-- Fade noir pour transitions de zones -->
<div id="fadeOverlay"></div>

<!-- MENU PRINCIPAL -->
<div id="mainMenu" class="menu-window">
    <div class="menu-title">âš”ï¸ MENU âš”ï¸</div>
    <div class="menu-subtitle">Dresseur: <span id="trainerName">Red</span> â€” <span id="trainerMoney">500â‚½</span></div>
    <div class="menu-buttons">
        <button class="menu-btn" id="btnMenuInventory">ğŸ“¦ Inventaire</button>
        <button class="menu-btn" id="btnMenuTeam">ğŸ‘¥ Ã‰quipe</button>
        <button class="menu-btn" id="btnMenuMap">ğŸ—ºï¸ Carte</button>
        <button class="menu-btn" id="btnMenuSave">ğŸ’¾ Sauvegarder</button>
        <button class="menu-btn" id="btnMenuOptions">âš™ï¸ Options</button>
        <button class="menu-btn danger" id="btnMenuClose">âŒ Fermer</button>
    </div>
</div>

<!-- MENU INVENTAIRE -->
<div id="inventoryMenu" class="menu-window">
    <div class="menu-title">ğŸ“¦ INVENTAIRE</div>
    <div class="menu-subtitle">SÃ©lectionne un objet pour voir les options.</div>

    <div id="inventoryGrid"></div>

    <div id="inventoryDetail">
        <div id="inventoryDetailTitle"></div>
        <div id="inventoryDetailDesc"></div>
        <div class="detail-buttons">
            <button class="detail-btn" id="btnUseItem">Utiliser</button>
            <button class="detail-btn" id="btnInfoItem">Infos</button>
            <button class="detail-btn secondary" id="btnBackItem">Retour</button>
        </div>
    </div>

    <div class="menu-footer">
        <button class="detail-btn secondary" id="btnInventoryBack">â¬… Retour au menu</button>
    </div>
</div>

<!-- MENU Ã‰QUIPE -->
<div id="teamMenu" class="menu-window">
    <div class="menu-title">ğŸ‘¥ Ã‰QUIPE</div>
    <div class="menu-subtitle">Tes Digiters actuels.</div>

    <div id="teamList"></div>

    <div class="menu-footer">
        <button class="detail-btn secondary" id="btnTeamBack">â¬… Retour au menu</button>
    </div>
</div>

<!-- DIALOGUE -->
<div id="dialogBox"><span id="dialogText"></span></div>

<!-- HUD VITESSE -->
<div id="hudSpeed">Vitesse : <span id="hudSpeedText">ğŸš¶ Marche</span></div>
<!-- ===== CONTAINER MODÃˆLES 3D COMBAT ===== -->
<div id="combatModelsContainer" style="display:none;">
    <div id="playerModelContainer" class="combat-model-container left"></div>
    <div id="enemyModelContainer" class="combat-model-container right"></div>
</div>
<!-- ===== COMBAT TOP UI (INFO DIGITERS) ===== -->
<div id="combatTopUI">
    <div class="combat-mon-card" id="combatPlayerCard">
        <div class="combat-mon-name" id="combatPlayerNameTop">Adoubee N.5</div>
        <div class="combat-mon-hpbar-wrap">
            <div class="combat-mon-hpbar" id="combatPlayerHpBar" style="width:100%;"></div>
        </div>
        <div class="combat-mon-hp-text" id="combatPlayerHpText">35 / 35 PV</div>
    </div>
    <div class="combat-mon-card" id="combatEnemyCard">
        <div class="combat-mon-name" id="combatEnemyNameTop">Ennemi N.5</div>
        <div class="combat-mon-hpbar-wrap">
            <div class="combat-mon-hpbar" id="combatEnemyHpBar" style="width:100%;"></div>
        </div>
        <div class="combat-mon-hp-text" id="combatEnemyHpText">30 / 30 PV</div>
    </div>
</div>

<!-- ===== COMBAT BOTTOM UI ===== -->
<div id="combatUI">
    <div id="combatInner">
        <div id="combatQuestionBox">
            <span id="combatQuestionText">Que doit faire ton Digiter ?</span>
        </div>

        <!-- Choix principaux -->
        <div id="combatChoices">
            <button class="combat-choice-btn" id="combatChoiceAttack" data-action="attack">Attaquer</button>
            <button class="combat-choice-btn" id="combatChoiceBag" data-action="bag">Sac</button>
            <button class="combat-choice-btn" id="combatChoiceRun" data-action="run">Fuite</button>
        </div>

        <!-- Zone log -->
        <div id="combatLogBox">
            <div id="combatLogText">Un combat commence !</div>
            <div id="combatTurn">Tour 1</div>
        </div>

        <!-- Sous-menu Attaques -->
        <div id="combatAttackList">
            <button class="combat-attack-btn" id="attackBtn0" data-index="0">-</button>
            <button class="combat-attack-btn" id="attackBtn1" data-index="1">-</button>
            <button class="combat-attack-btn" id="attackBtn2" data-index="2">-</button>
            <button class="combat-attack-btn" id="attackBtn3" data-index="3">-</button>
        </div>
        <div id="combatAttackInfo">
            <div id="combatAttackInfoText">Infos attaque...</div>
        </div>
    </div>
</div>

<!-- Sous-menu Sac (inventaire en combat) - Overlay complet -->
<div id="combatBagList" style="display:none;">
    <h3>ğŸ’ Sac</h3>
    <div id="combatBagItems"></div>
</div>

<!-- Sous-menu Ã‰quipe (changement de Digiter) - Overlay complet -->
<div id="combatTeamList" style="display:none;">
    <div id="combatTeamMembers"></div>
</div>

<!-- JS principal -->
<script type="module" src="./JS/main.js"></script>
</body>
</html>
